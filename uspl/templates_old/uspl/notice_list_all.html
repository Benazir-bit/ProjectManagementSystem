{% extends "uspl/base.html" %}
{% block title %}All Notice{% endblock %}


{% block content %}
<div id="base-main-body" class="col-sm-8"> 
	<div class="row">
		<div class="col-sm-12">
			<br>
			<div id="main-body-div"> <!--added new div-->
				<div id="main_body_header" class="row">				
					<p><b>All Notice</b></p>
				</div>
				<br>
				{% if notices %}
				<div class="col-sm-12">
					<br>
					{% regroup notices by created_on.date as section_list %}
					{% for created_on in section_list %}
					    <i class="fa fa-calendar" id="newspage_date"> {{created_on.grouper}}</i><br><br>
					    {% for notice in created_on.list %}
							<div class="row event">
								<div class="col-xs-10" id="notice_title" style="text-align: justify">
									<p><a href="{% url 'uspl:notice_details' notice.id %}">{{notice.title}}<br></p>
								</div>
								<div class="col-xs-2" id="news_msg_date">
									<span class="glyphicon glyphicon-time"></span>  {{notice.created_on.time}}
									<a href="#" data-toggle="modal" data-target="#delete_notice{{notice.id}}"><span class="glyphicon glyphicon-trash" style="color:red; margin-left:5px;"></span></a>
									
									<div class="modal fade" id="delete_notice{{notice.id}}" role="dialog">
										<div class="modal-dialog">
											<!-- Modal content-->
											<div class="modal-content">
												<div class="modal-header">
													<button type="button" class="close" data-dismiss="modal">&times;</button>
													<h3 class="modal-title"><b>Delete Notice?</b></h3>
												</div>
												<div class="modal-body">
													<form method="post" class = "form-set"> 
														{% csrf_token %}
														<input type="hidden" name="notice_id" value="{{notice.id}}">
														<div class="row" align="center">
															<p>Are you sure you want to delete this notice?</p>
															<button class="btn btn-danger" type="submit" role="button" name="delete_notice">Confirm</button>
															<button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
														</div>
													</form>
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<hr id="hr_news_all">
					    {% endfor %}
					{% endfor %}
				</div>
				<br>
				<div class="row" align="center">				
					{% if notices.has_other_pages %}
                        <ul class="pagination">
                            {% if notices.has_previous %}
                            	<li><a href="?page=1">&laquo;</a></li>
                                <li><a href="?page={{ notices.previous_page_number }}">&lt;</a></li>	
                            {% endif %}
                            
                             {% for num in notices.paginator.page_range %}
                            	{% if notices.number == num %}
    								<li class="active"><span>{{ num }} <span class="sr-only">(current)</span></span></li>
    							{% elif num > notices.number|add:'-3' and num < notices.number|add:'3' %}
    								<li><a href="?page={{ num }}">{{ num }}</a></li>
    							{% endif %}
  							{% endfor %}
                            
                            
                            {% if all_news.has_next %}
                                <li><a href="?page={{ notices.next_page_number }}">&gt;</a></li>
                                <li><a href="?page={{ notices.paginator.num_pages }}">&raquo;</a></li>
                            {% endif %}
                        </ul>
                    {% endif %}
				</div>
				{% else %}
				<div class ="row">
					<h4 id="not-available-msg">No Notice Available!</h4>
				</div>
				{% endif %}
			</div>	
		</div>	
	</div>
</div>
{% endblock %}